# 更新日志

## 最新优化 (2025-10-10)

### ✨ 目录自动创建功能

配置文件现在支持使用 `folderName` 字段自动创建和管理目录！

#### 主要特性

1. **智能导入**：使用 `folderName` 而不是 `folderId`，更加直观易用
2. **自动创建**：导入时如果目录不存在，系统会自动创建
3. **智能归类**：相同 `folderName` 的题目自动归到同一目录
4. **颜色分配**：新目录自动分配预设颜色，便于区分
5. **去重机制**：同名目录不会重复创建

#### 配置样例更新

**旧格式（仍然兼容）：**
```json
{
  "type": "sentence-building",
  "sentence": "I love my family",
  "translation": "我爱我的家人",
  "folderId": null
}
```

**新格式（推荐）：**
```json
{
  "type": "sentence-building",
  "sentence": "I love my family",
  "translation": "我爱我的家人",
  "folderName": "基础句型"
}
```

#### 两级目录样例

```json
[
  {
    "type": "sentence-building",
    "sentence": "I love my family",
    "translation": "我爱我的家人",
    "folderName": "基础句型"
  },
  {
    "type": "sentence-building",
    "sentence": "What is your favorite color",
    "translation": "你最喜欢的颜色是什么",
    "folderName": "基础句型"
  },
  {
    "type": "matching",
    "sentence": "动物单词",
    "translation": "学习常见动物的英文单词",
    "words": ["dog", "cat", "bird", "fish"],
    "wordTranslations": ["狗", "猫", "鸟", "鱼"],
    "folderName": "词汇练习"
  },
  {
    "type": "matching",
    "sentence": "颜色单词",
    "translation": "学习常见颜色的英文单词",
    "words": ["red", "blue", "green", "yellow"],
    "wordTranslations": ["红色", "蓝色", "绿色", "黄色"],
    "folderName": "词汇练习"
  },
  {
    "type": "sentence-building",
    "sentence": "Nice to meet you",
    "translation": "很高兴见到你",
    "folderName": "日常问候"
  }
]
```

这个配置会自动创建3个目录：
- **基础句型**（2道拼句子题）
- **词汇练习**（2道连线题）
- **日常问候**（1道拼句子题）

#### 导入反馈优化

导入成功后会显示：
- ✅ 成功导入的题目数量
- ✅ 创建的新目录数量

示例：`成功导入 5 道题目，创建了 3 个新目录`

### 🎯 配置样例优化

所有配置样例文件都已更新：
- ✅ 拼句子题样例：展示多个目录分类
- ✅ 连线题样例：展示目录组织
- ✅ 混合题型样例：展示两种题型混合使用
- ✅ 页面内提示：增加 folderName 使用说明
- ✅ 下载样例：所有可下载的样例都包含目录结构

### 📚 文档更新

- ✅ 更新了《配置文件说明.md》
- ✅ 添加了详细的目录自动创建功能说明
- ✅ 提供了完整的两级目录使用示例
- ✅ 说明了新旧格式的兼容性

### 🔧 技术实现

1. **storage.ts**
   - 新增 `findOrCreateFolder()` 函数
   - 支持按名称查找或创建目录
   - 自动循环分配预设颜色

2. **ConfigUploader.tsx**
   - 支持 `folderName` 字段解析
   - 兼容旧的 `folderId` 格式
   - 统计并显示新创建的目录数量
   - 更新所有配置样例

3. **向后兼容**
   - 旧的 `folderId` 格式仍然支持
   - 可以混用新旧格式
   - 不影响已有数据

## 之前的更新

### 连线题功能 (2025-10-10)

- ✅ 新增连线题游戏类型
- ✅ 左右两列配对界面
- ✅ 确保单词和翻译不在同一行
- ✅ 正确/错误音效和动画
- ✅ 进度显示和完成庆祝

### 配置文件导入 (2025-10-10)

- ✅ 支持 JSON 格式批量导入
- ✅ 支持两种题型混合导入
- ✅ 提供三种配置样例
- ✅ 可下载样例文件
- ✅ 详细的字段说明和使用指南

### 题库管理 (2025-10-10)

- ✅ 新建题目时选择题型
- ✅ 拼句子题自动翻译
- ✅ 连线题单词列表输入
- ✅ 题型图标和标签显示
- ✅ 编辑题目可修改题型

---

**当前版本功能完整，适合 8-9 岁儿童使用！** 🎉
